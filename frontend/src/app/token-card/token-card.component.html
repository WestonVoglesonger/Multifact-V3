<div
  class="bg-white rounded shadow p-4 relative transition hover:shadow-lg border border-gray-200"
>
  <div class="flex items-center justify-between mb-2">
    <div>
      <h4 class="text-xl font-bold text-gray-800">
        {{ token.scene_name ? "Scene: " + token.scene_name : "" }}
        {{ token.component_name ? "Component: " + token.component_name : "" }}
        <span
          *ngIf="!token.scene_name && !token.component_name"
          class="text-gray-600 text-sm"
        >
          (No Scene/Component)
        </span>
      </h4>
      <p class="text-sm text-gray-500">Token #{{ token.id }}</p>
    </div>
    <div>
      <button
        class="text-blue-600 hover:text-blue-800 mr-2"
        (click)="toggleEdit()"
      >
        <span *ngIf="!editing">Edit</span>
        <span *ngIf="editing">Cancel</span>
      </button>
    </div>
  </div>

  <div class="text-gray-700 mt-2">
    <div *ngIf="!editing">
      <pre
        class="whitespace-pre-wrap bg-gray-50 p-2 rounded text-sm max-h-40 overflow-auto"
      >
  {{ token.content }}
        </pre
      >
    </div>
    <div *ngIf="editing">
      <textarea
        [(ngModel)]="updatedContent"
        rows="5"
        class="w-full border border-gray-300 rounded p-2 text-sm focus:outline-none focus:border-blue-500"
      ></textarea>
      <div class="flex justify-end space-x-2 mt-2">
        <button
          class="bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 transition"
          [disabled]="saving"
          (click)="saveToken()"
        >
          {{ saving ? "Saving..." : "Save" }}
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="error" class="text-red-500 text-sm mt-2">
    {{ error }}
  </div>
</div>
